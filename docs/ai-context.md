# AI開発支援プロジェクト憲法 v3  
**（docs/ai-context.md）**  

---  

## 【第0章: 本憲法の目的と適用範囲】  

### 第1条: 憲法の意義  
本憲法は、AIと人間の協働開発における「記憶システム」として機能し、以下を保証する:  
- セッションを跨いだ文脈の継続性  
- 回帰バグのシステマティックな予防  
- ドキュメントを介したAIの記憶代替  

### 第2条: 優先順位規則  
1. 本文書は全ての開発文書に優先する  
2. 例外適用時は第6章の緊急プロトコルを遵守すること  

---  

## 【第1章: 文脈管理規範】  

### 第1条: セッション管理  
```markdown  
[AI自動表示フォーマット]  
■ セッションステータス ■  
✅ ai-context.md (v3.2) 読み込み
✅ development-plan.md 参照
作業引き継ぎ記録.md を参照
⚠ failure-log.md に未対応項目2件  
```  

### 第2条: コンテキスト更新  
- ユーザーが「続きから再開」と発言した場合:  
  1. 関連ファイルを再読み込み  
  2. 前回からの変更点を差分表示  

---  

## 【第2章: 開発品質基準】  

### 第1条: 回帰防止三原則  
1. 修正前に必ず`failure-log.md`を参照  
2. テストケースをPRに同梱  
3. 影響範囲を`#影響範囲:`タグで明記  

### 第2条: CI連携規約  
```yaml  
# GitHub Actions 例  
- name: 憲法整合性チェック  
  run: |  
    python check_constitution.py --files ai-context.md development-plan.md  
```  

---  

## 【第3章: 用語体系】  

### 第1条: 動的用語集  
| 用語 | 定義 | 最終更新 |  
|------|------|----------|  
| 緊急例外 | 第6章定義の一時ルール無効化 | 2023-12-01 |  
| コンテキスト長 | AIの処理可能トークン数(現在:128k) | 2023-12-01 |  

### 第2条: 用語更新フロー  
```python  
# 自動更新トリガー  
if detect_new_terms():  
    update_glossary("docs/glossary.md")  
```  

---  

## 【第4章: AI自己監視】  

### 第1条: 異常検知基準  
- **優先順位衝突**:  
  ```markdown  
  [CONFLICT] development-plan.md §3 ⇔ ai-context.md §1.2  
  解決案: 上位文書を優先（第0章第2条）  
  ```  
- **未定義用語**:  
  ```markdown  
  [UNDEFINED] "技術負債"が未定義  
  提案: ①説明要求 ②用語登録  
  ```  

### 第2条: プロンプト統制  
```markdown  
# AI初期命令  
あなたは常に:  
1. docs/ai-context.mdを最優先  
2. 未定義用語を即時報告  
3. 自己監視ログを維持  
```  

---  

## 【第5章: 変更管理】  

### 第1条: バージョン規則  
- 更新時は必ずタグ作成:  
  ```bash  
  git tag "constitution-v$(date +%Y%m%d)"  
  ```  
- 変更概要を`CHANGELOG.md`に追記  

### 第2条: 追記原則  
- 既存条項の改変禁止  
- 新規条項は末尾に追加  

---  

## 【第6章: 緊急例外プロトコル】  

### 第1条: 発動条件  
1. 本番環境障害  
2. AIモデルの重大仕様変更  

### 第2条: 実施手順  
1. `emergency-request.md`を作成:  
   ```markdown  
   ## 理由: [API仕様変更]  
   ## 影響: [第2章§3が非互換]  
   ## 暫定案: [新しいテスト規約を提案]  
   ```  
2. 72時間以内に通常状態へ復帰  

---  

## 【第7章: 監査と改善】  

### 第1条: 定期レビュー  
- 四半期ごとに以下を実施:  
  1. 用語集の妥当性検証  
  2. 緊急例外の分析  
  3. バージョン間差分の評価  

### 第2条: 改善提案  
```markdown  
# 提案テンプレート  
## 問題点: [具体的現象]  
## 改訂案: [条項変更内容]  
## 期待効果: [品質向上の根拠]  
```  

---  

## 【第8章: 自動読込規約】  

### 第1条: 連鎖読込セット  
- 本文書（docs/ai-context.md）を読み込む際は、docs/作業引き継ぎ記録.md を自動的に読み込み、要点を保持すること。  
- セッション開始時の「AI自動表示フォーマット」に、両文書の読込ステータスを表示すること。  

### 第2条: 差分同期  
- いずれかの文書に更新があった場合、再読み込み時に差分サマリを提示すること（第1章第2条に従う）。  

---  

**憲法バージョン: 3.2**  
**最終更新: 2023-12-02**  
**対応AIモデル: ChatGPT-4 (128kコンテキスト)**  
